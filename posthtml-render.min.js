!function(global){function postHTMLRender(tree,options){function html(tree){function attrs(obj){var attr="";for(var key in obj)"boolean"==typeof obj[key]&&obj[key]?attr+=" "+key:"string"!=typeof obj[key]&&"number"!=typeof obj[key]||(attr+=" "+key+'="'+obj[key]+'"');return attr}var buf="";return traverse([].concat(tree),function(node){if(node){if("string"==typeof node||"number"==typeof node)return void(buf+=node);if("boolean"==typeof node.tag&&!node.tag)return"object"!=typeof node.content&&(buf+=node.content),node.content;if(Array.isArray(node))return void(buf+=html(node));var tag=node.tag||"div";if(singleTags[tag])switch(buf+="<"+tag+attrs(node.attrs),closingSingleTag){case"slash":buf+=" />";break;case"tag":buf+="></"+tag+">";break;default:buf+=">"}else if(maxLinelength&&"style"===tag){var pos=maxLinelength,content="";for(node.content&&(content=html(node.content));pos<content.length;){for(;";"!==content[pos]&&"}"!==content[pos]&&"{"!==content[pos];)pos-=1;content=content.substr(0,pos)+"\n"+content.substr(pos),pos+=maxLinelength}buf+="<"+tag+(node.attrs?attrs(node.attrs):"")+">"+content+"</"+tag+">"}else buf+="<"+tag+(node.attrs?attrs(node.attrs):"")+">"+(node.content?html(node.content):"")+"</"+tag+">"}}),maxLinelength&&(linePos+buf.length<maxLinelength||0===linePos?linePos+=buf.length:(linePos=0,buf="\n"+buf)),buf}options=options||{};for(var optSingleTags=options.singleTags,closingSingleTag=options.closingSingleTag,SINGLE_TAGS=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],singleTags={},i=0,leni=SINGLE_TAGS.length;i<leni;i++)singleTags[SINGLE_TAGS[i]]=1;if(optSingleTags)for(var j=0,lenj=optSingleTags.length;j<lenj;j++)singleTags[optSingleTags[j]]=1;var maxLinelength=options.maxLinelength?options.maxLinelength:0,linePos=0;return html(tree)}function traverse(tree,cb){if(Array.isArray(tree))for(var i=0,len=tree.length;i<len;i++)traverse(cb(tree[i]),cb);else"object"==typeof tree&&tree.hasOwnProperty("content")&&traverse(tree.content,cb);return tree}var defineAsGlobal=!0;"object"==typeof module&&"object"==typeof module.exports&&(module.exports=postHTMLRender,defineAsGlobal=!1),"object"==typeof modules&&"function"==typeof modules.define&&(modules.define("postHTMLRender",function(provide){provide(postHTMLRender)}),defineAsGlobal=!1),"function"==typeof define&&(define(function(require,exports,module){module.exports=postHTMLRender}),defineAsGlobal=!1),defineAsGlobal&&(global.postHTMLRender=postHTMLRender)}("undefined"!=typeof window?window:global);